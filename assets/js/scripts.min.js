/*!
 * gulp-nunjucks-sass-template
 * A Gulp 4 template including SCSS, Nunjucks, JS and more
 *
 * Url: https://github.com/DefaultSimon
 * Author: Simon GoriÄar
 * Copyright 2022. License: MIT
 */
window.onload=function(){const e=new IntersectionObserver(function(e,t){e.forEach(e=>{e.isIntersecting?(e.target.classList.remove("animate-off"),e.target.classList.add("animate")):(e.target.classList.remove("animate"),e.target.classList.add("animate-off"))})},{root:null,rootMargin:"10%",threshold:.5});function t(e){let t=window.innerWidth/2,n=window.innerHeight/2,o=e.clientX,s=e.clientY;this.querySelectorAll(".parallaxed").forEach((e,a)=>{let i=-.001*a-.001;e.style.marginLeft=`${(o-t)*i}%`,e.style.marginTop=`${(s-n)*i}%`})}document.querySelectorAll(".section").forEach(t=>e.observe(t)),document.querySelectorAll(".parallax").forEach(e=>{e.addEventListener("mousemove",t)});const n=document.querySelectorAll(".section");let o=!1;function s(e,t,n,s){console.log(e,t),o=!0;let a=null,i=window.pageYOffset||document.documentElement.scrollTop,c=window.innerHeight,r=0,l=0;r="center"===s?t?(c+e.offsetHeight)/2:e.parentElement.getBoundingClientRect().top+(c+e.offsetHeight)/2:"bottom"===s?e.parentElement.getBoundingClientRect().bottom-c:e.getBoundingClientRect().top,function(){const e=["ms","moz","webkit","o"];for(let t=0,n=e.length;t<n&&!window.requestAnimationFrame;t++)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"]}(),window.requestAnimationFrame(function s(d){a||(a=d||(new Date).getTime());let m=(d-a)/+n;m=+m.toFixed(2);let u=+(f=m,f*(2-f)).toFixed(2);var f;l=+(l=i+r*u).toFixed(2),window.scrollTo(0,l),console.log(isNaN(l),l<0,!t&&l<=0,!t&&l<=i+r+1,t&&l>=i+r,t&&l+c+c/6>document.body.clientHeight,t&&e.getBoundingClientRect().bottom<document.body.clientHeight,e.getBoundingClientRect().bottom,document.body.clientHeight),isNaN(l)||l<0||!t&&l<=0||!t&&l<=i+r+1||t&&l>=i+r||t&&e.getBoundingClientRect().bottom<document.body.clientHeight?(cancelAnimationFrame(a),e&&e.focus(),setTimeout(()=>{o=!1,console.log(l,o,e)},300)):window.requestAnimationFrame(s)})}function a(e,t,n){!n&&t.offsetHeight<window.innerHeight||(e.classList.add("animate-fade"),t.classList.remove("animate-fade"))}function i(e,t){if(e.preventDefault(),!o){let i,c=Array.from(n).findIndex(e=>e.classList.contains("animate")),r=e.deltaY>0||n[c].getBoundingClientRect().top<0;if(console.log(n[c].getBoundingClientRect().top,r,t),i=r?c+1<=n.length?Array.from(n)[c+1]:Array.from(n)[c]:c>0?Array.from(n)[c-1]:Array.from(n)[0],n[c].classList.contains("section--variants")){let e=document.querySelectorAll(".section--variants .variant");r&&e[e.length-1].classList.contains("variant--current")||!r&&e[0].classList.contains("variant--current")?new s(i,r,600):(console.log(n[c],n[c].getBoundingClientRect().top),n[c].scrollTo({top:0,left:0,behavior:"instant"}),new function(e,t,n){o=!0;let s=e.querySelector(".section__variants").getBoundingClientRect().top,a=e.querySelector("ul"),i=e.querySelector(".variant--current"),c=n?Array.from(t).findIndex(e=>e.classList.contains("variant--current"))+1:Array.from(t).findIndex(e=>e.classList.contains("variant--current"))-1,r=Array.from(t)[c].getBoundingClientRect().top,l=0;if(a.style.transform){let e=window.getComputedStyle(a);l=new DOMMatrixReadOnly(e.transform).m42}console.log(s,a.getBoundingClientRect().top,r,l),i.classList.remove("variant--current"),Array.from(t)[c].classList.add("variant--current"),a.style.transform=`translateY(${s-r+l}px)`,setTimeout(()=>o=!1,300)}(document.querySelector(".section--variants"),e,r))}else if(n[c].classList.contains("section--world")){let e=document.querySelectorAll(".section--world .section__slide");r&&e[e.length-1].classList.contains("show")||!r&&e[0].classList.contains("show")?new s(i,r,600):new function(e,t,n){o=!0;let s=Array.from(t).findIndex(e=>e.classList.contains("show")),a=n?s+1:s-1;Array.from(t)[s].classList.remove("show"),Array.from(t)[a].classList.add("show"),e.setAttribute("data-slide",+a),setTimeout(()=>o=!1,300)}(n[c],e,r)}else if(n[c].classList.contains("section--roadmap")||i.classList.contains("section--roadmap")&&!r||i.classList.contains("section--opportunities")&&!r){let e=document.querySelector(".section--roadmap .expertise");e.classList.contains("animate-off")?r?(new a(n[c].querySelector(".section__content"),e,r),new s(e,r,900,"bottom"),e.classList.remove("animate-off")):(i.querySelector(".community").classList.remove("animate-fade"),new s(i.querySelector(".community"),r,900,"center")):e.classList.contains("animate-fade")?(e.classList.remove("animate-fade"),i.querySelector(".section__content").classList.add("animate-fade"),new s(e,r,900,"bottom")):r?(new s(i,r,600),e.classList.add("animate-fade")):(new s(n[c],r,600),e.classList.add("animate-off"),n[c].querySelector(".section__content").classList.remove("animate-fade"))}else if(n[c].classList.contains("section--opportunities")||i.classList.contains("section--opportunities")&&!r||i.classList.contains("section--backstory")&&!r){let e=document.querySelector(".section--opportunities .community");e.classList.contains("animate-off")?r?(e.classList.remove("animate-off"),new a(n[c].querySelector(".section__content"),e,r),new s(e,r,900,"center")):(i.querySelector(".place").classList.remove("animate-fade"),new s(i.querySelector(".place"),r,900,"center")):e.classList.contains("animate-fade")?(e.classList.remove("animate-fade"),i.querySelector(".section__content").classList.add("animate-fade"),new s(e,r,900,"center")):r?(new s(e,r,900,"center"),e.classList.add("animate-fade")):(new s(n[c],r,600),e.classList.add("animate-off"),n[c].querySelector(".section__content").classList.remove("animate-fade"))}else if(n[c].classList.contains("section--backstory")||i.classList.contains("section--backstory")&&!r||i.classList.contains("section--world")&&!r){let e=document.querySelector(".section--backstory .place");e.classList.contains("animate-off")?r?(e.classList.remove("animate-off"),new a(n[c].querySelector(".section__content"),e,r),new s(e,r,900,"center")):(n[c].classList.remove("animate-off"),new s(i,r,600)):e.classList.contains("animate-fade")?(e.classList.remove("animate-fade"),i.querySelector(".section__content").classList.add("animate-fade"),new s(e,r,900,"center")):r?(new s(e,r,900,"center"),e.classList.add("animate-fade")):(new s(n[c],r,600),e.classList.add("animate-off"),n[c].querySelector(".section__content").classList.remove("animate-fade"))}else console.log(i),new s(i,r,600)}}window.addEventListener("wheel",i,{passive:!1}),window.addEventListener("mousewheel",i,{passive:!1}),window.addEventListener("DOMMouseScroll",i,{passive:!1}),window.addEventListener("scroll",i,{passive:!1}),new Splide(".road",{perPage:3,perMove:1,breakpoints:{920:{perPage:2},520:{perPage:1}}}).mount(),new Splide(".section__articles",{perPage:3,perMove:1,gap:"32px",breakpoints:{640:{gap:"16px",perPage:2},520:{gap:"16px",perPage:1}}}).mount(),new Splide(".section__opportunities",{perPage:4,perMove:1,gap:"32px",breakpoints:{920:{perPage:2},640:{perPage:1}}}).mount()};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiXSwibmFtZXMiOlsid2luZG93Iiwib25sb2FkIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJmb3JFYWNoIiwiZW50cnkiLCJpc0ludGVyc2VjdGluZyIsInRhcmdldCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInJvb3QiLCJyb290TWFyZ2luIiwidGhyZXNob2xkIiwiUGFyYWxsYXgiLCJlIiwiX3ciLCJpbm5lcldpZHRoIiwiX2giLCJpbm5lckhlaWdodCIsIl9tb3VzZVgiLCJjbGllbnRYIiwiX21vdXNlWSIsImNsaWVudFkiLCJ0aGlzIiwicXVlcnlTZWxlY3RvckFsbCIsImVsIiwiaW5kZXgiLCJtdWx0aXBseSIsInN0eWxlIiwibWFyZ2luTGVmdCIsIm1hcmdpblRvcCIsImRvY3VtZW50Iiwib2JzZXJ2ZSIsInBhcmFsbGF4IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNlY3Rpb25zIiwiaXNTY3JvbGxpbmciLCJTY3JvbGwiLCJlbGVtZW50IiwiaXNEb3duIiwic3BlZWQiLCJ0eXBlIiwiY29uc29sZSIsImxvZyIsInN0YXJ0IiwiZmlyc3RQb3MiLCJwYWdlWU9mZnNldCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFRvcCIsIndpbmRvd0hlaWdodCIsInBvcyIsIm9mZnNldEhlaWdodCIsInBhcmVudEVsZW1lbnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJib3R0b20iLCJicm93c2VyIiwieCIsImxlbmd0aCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwic2hvd0FuaW1hdGlvbiIsInRpbWVzdGFtcCIsIkRhdGUiLCJnZXRUaW1lIiwicHJvZ3Jlc3MiLCJ0b0ZpeGVkIiwiZWFzZUluUGVyY2VudGFnZSIsIm4iLCJzY3JvbGxUbyIsImlzTmFOIiwiYm9keSIsImNsaWVudEhlaWdodCIsImZvY3VzIiwic2V0VGltZW91dCIsIkFuaW1hdGVGYWRlIiwiY3VycmVudCIsImlkRG93biIsIldoZWVsIiwiRG93biIsInByZXZlbnREZWZhdWx0IiwiQXJyYXkiLCJmcm9tIiwiZmluZEluZGV4Iiwic2VjdGlvbiIsImNvbnRhaW5zIiwiZGVsdGFZIiwidmFyaWFudHMiLCJsZWZ0IiwiYmVoYXZpb3IiLCJjb250YWluZXIiLCJlbGVtZW50cyIsImNvbnRhaW5lclRvcCIsInF1ZXJ5U2VsZWN0b3IiLCJwYXJlbnQiLCJ0YXJnZXRJbmRleCIsInRyYW5zZm9ybSIsImdldENvbXB1dGVkU3R5bGUiLCJET01NYXRyaXhSZWFkT25seSIsIm00MiIsInNsaWRlcyIsInNldEF0dHJpYnV0ZSIsImV4cGVydGlzZSIsImNvbW11bml0eSIsInBsYWNlIiwicGFzc2l2ZSIsIlNwbGlkZSIsInBlclBhZ2UiLCJwZXJNb3ZlIiwiYnJlYWtwb2ludHMiLCI5MjAiLCI1MjAiLCJtb3VudCIsImdhcCIsIjY0MCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQUEsT0FBQUMsT0FBQSxXQWFBLE1BQUFDLEVBQUEsSUFBQUMscUJBTkEsU0FBQUMsRUFBQUYsR0FQQUUsRUFBQUMsUUFBQUMsSUFDQUEsRUFBQUMsZ0JBRUFELEVBQUFFLE9BQUFDLFVBQUFDLE9BQUEsZUFDQUosRUFBQUUsT0FBQUMsVUFBQUUsSUFBQSxhQUdBTCxFQUFBRSxPQUFBQyxVQUFBQyxPQUFBLFdBQ0FKLEVBQUFFLE9BQUFDLFVBQUFFLElBQUEsb0JBTkFDLEtBQUEsS0FDQUMsV0FBQSxNQUNBQyxVQUFBLEtBY0EsU0FBQUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBakIsT0FBQWtCLFdBQUEsRUFDQUMsRUFBQW5CLE9BQUFvQixZQUFBLEVBQ0FDLEVBQUFMLEVBQUFNLFFBQ0FDLEVBQUFQLEVBQUFRLFFBQ0FDLEtBQUFDLGlCQUFBLGVBQ0FyQixRQUFBLENBQUFzQixFQUFBQyxLQUNBLElBQUFDLEdBQUEsS0FBQUQsRUFBQSxLQUNBRCxFQUFBRyxNQUFBQyxlQUFBVixFQUFBSixHQUFBWSxLQUNB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QUFBeUMsR0FBQXJDLEVBQUEsS0FDQWlFLEVBQUFqRyxVQUFBRSxJQUFBLGVBQ0EwQixFQUFBeUMsR0FBQWlCLGNBQUEscUJBQUF0RixVQUFBQyxPQUFBLHNCQUtBa0MsUUFBQUMsSUFBQXJDLEdBQ0EsSUFBQStCLEVBQUEvQixFQUFBaUMsRUFBQSxNQUtBekMsT0FBQW9DLGlCQUFBLFFBQUE0QyxHQUFBMkIsU0FBQSxJQUNBM0csT0FBQW9DLGlCQUFBLGFBQUE0QyxHQUFBMkIsU0FBQSxJQUNBM0csT0FBQW9DLGlCQUFBLGlCQUFBNEMsR0FBQTJCLFNBQUEsSUFDQTNHLE9BQUFvQyxpQkFBQSxTQUFBNEMsR0FBQTJCLFNBQUEsSUFpQkEsSUFBQUMsT0FBQSxTQUNBQyxRQUFBLEVBQ0FDLFFBQUEsRUFDQUMsYUFDQUMsS0FDQUgsUUFBQSxHQUVBSSxLQUNBSixRQUFBLE1BSUFLLFFBRUEsSUFBQU4sT0FBQSxzQkFDQUMsUUFBQSxFQUNBQyxRQUFBLEVBQ0FLLElBQUEsT0FDQUosYUFDQUssS0FDQUQsSUFBQSxPQUNBTixRQUFBLEdBRUFJLEtBQ0FFLElBQUEsT0FDQU4sUUFBQSxNQUlBSyxRQUVBLElBQUFOLE9BQUEsMkJBQ0FDLFFBQUEsRUFDQUMsUUFBQSxFQUNBSyxJQUFBLE9BQ0FKLGFBQ0FDLEtBQ0FILFFBQUEsR0FFQU8sS0FDQVAsUUFBQSxNQUlBSyIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IG9ic2VydmVyT3B0aW9ucyA9IHtcbiAgICByb290OiBudWxsLFxuICAgIHJvb3RNYXJnaW46ICcxMCUnLFxuICAgIHRocmVzaG9sZDogMC41XG4gIH07XG5cbiAgZnVuY3Rpb24gb2JzZXJ2ZXJDYWxsYmFjayhlbnRyaWVzLCBvYnNlcnZlcikge1xuICAgIGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgLy8gZmFkZSBpbiBvYnNlcnZlZCBlbGVtZW50cyB0aGF0IGFyZSBpbiB2aWV3XG4gICAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlLW9mZicpO1xuICAgICAgICBlbnRyeS50YXJnZXQuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZmFkZSBvdXQgb2JzZXJ2ZWQgZWxlbWVudHMgdGhhdCBhcmUgbm90IGluIHZpZXdcbiAgICAgICAgZW50cnkudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUnKTtcbiAgICAgICAgZW50cnkudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGUtb2ZmJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihvYnNlcnZlckNhbGxiYWNrLCBvYnNlcnZlck9wdGlvbnMpO1xuXG4gIGNvbnN0IGZhZGVFbG1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24nKTtcbiAgZmFkZUVsbXMuZm9yRWFjaChlbCA9PiBvYnNlcnZlci5vYnNlcnZlKGVsKSk7XG5cbiAgZnVuY3Rpb24gUGFyYWxsYXgoZSkge1xuICAgIGxldCBfdyA9IHdpbmRvdy5pbm5lcldpZHRoLzI7XG4gICAgbGV0IF9oID0gd2luZG93LmlubmVySGVpZ2h0LzI7XG4gICAgbGV0IF9tb3VzZVggPSBlLmNsaWVudFg7XG4gICAgbGV0IF9tb3VzZVkgPSBlLmNsaWVudFk7XG4gICAgbGV0IGVsZW1zID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCcucGFyYWxsYXhlZCcpO1xuICAgIGVsZW1zLmZvckVhY2goKGVsLCBpbmRleCkgPT4ge1xuICAgICAgbGV0IG11bHRpcGx5ID0gaW5kZXggKiAtMC4wMDEgLSAwLjAwMTtcbiAgICAgIGVsLnN0eWxlLm1hcmdpbkxlZnQgPSBgJHsoX21vdXNlWCAtIF93KSAqIG11bHRpcGx5fSVgO1xuICAgICAgZWwuc3R5bGUubWFyZ2luVG9wID0gYCR7KF9tb3VzZVkgLSBfaCkgKiBtdWx0aXBseX0lYDtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHBhcmFsbGF4ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFyYWxsYXgnKTtcbiAgcGFyYWxsYXhlcy5mb3JFYWNoKChwYXJhbGxheCkgPT4ge1xuICAgIHBhcmFsbGF4LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgUGFyYWxsYXgpO1xuICB9KTtcblxuICBjb25zdCBzZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uJyk7XG5cbiAgLy8gc2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xuICAvLyAgIGNvbnNvbGUubG9nKHNlY3Rpb24uY2xhc3NMaXN0KTtcbiAgLy8gfSk7XG4gIGxldCBpc1Njcm9sbGluZyA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIFNjcm9sbChlbGVtZW50LCBpc0Rvd24sIHNwZWVkLCB0eXBlKSB7XG4gICAgY29uc29sZS5sb2coZWxlbWVudCwgaXNEb3duKTtcbiAgICBpc1Njcm9sbGluZyA9IHRydWU7XG4gICAgbGV0IHN0YXJ0ID0gbnVsbDtcbiAgICBsZXQgZmlyc3RQb3MgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICBsZXQgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgIGxldCB0YXJnZXQgPSAwO1xuICAgIGxldCBwb3MgPSAwO1xuXG4gICAgaWYgKHR5cGUgPT09ICdjZW50ZXInKSB7XG4gICAgICB0YXJnZXQgPSBpc0Rvd24gPyAod2luZG93SGVpZ2h0ICsgZWxlbWVudC5vZmZzZXRIZWlnaHQpIC8gMiA6IGVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyAod2luZG93SGVpZ2h0ICsgZWxlbWVudC5vZmZzZXRIZWlnaHQpIC8gMjtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdib3R0b20nKSB7XG4gICAgICB0YXJnZXQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIC0gd2luZG93SGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICB9XG5cbiAgICAvLyBjb25zb2xlLmxvZyhmaXJzdFBvcywgdGFyZ2V0LCBwb3MsIGVsZW1lbnQpO1xuXG4gICAgKGZ1bmN0aW9uKCkge1xuXG4gICAgICBjb25zdCBicm93c2VyID0gWydtcycsICdtb3onLCAnd2Via2l0JywgJ28nXTtcblxuICAgICAgZm9yKGxldCB4ID0gMCwgbGVuZ3RoID0gYnJvd3Nlci5sZW5ndGg7IHggPCBsZW5ndGggJiYgIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7IHgrKykge1xuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93W2Jyb3dzZXJbeF0rJ1JlcXVlc3RBbmltYXRpb25GcmFtZSddO1xuICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbYnJvd3Nlclt4XSsnQ2FuY2VsQW5pbWF0aW9uRnJhbWUnXSB8fCB3aW5kb3dbYnJvd3Nlclt4XSsnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgICB9XG5cbiAgICB9KCkpO1xuXG4gICAgZnVuY3Rpb24gc2hvd0FuaW1hdGlvbiAodGltZXN0YW1wKSB7XG5cbiAgICAgIGlmKCFzdGFydCkgeyBzdGFydCA9IHRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKTsgfSAvL2dldCBpZCBvZiBhbmltYXRpb25cblxuICAgICAgbGV0IGVsYXBzZWQgPSB0aW1lc3RhbXAgLSBzdGFydDtcbiAgICAgIGxldCBwcm9ncmVzcyA9IGVsYXBzZWQgLyArc3BlZWQ7IC8vIGFuaW1hdGlvbiBkdXJhdGlvbiA1MDBtc1xuICAgICAgcHJvZ3Jlc3MgPSArcHJvZ3Jlc3MudG9GaXhlZCgyKTtcblxuICAgICAgLy8gY29uc29sZS5sb2coc3RhcnQsIHRpbWVzdGFtcCwgcHJvZ3Jlc3MsIGVsYXBzZWQsIHNwZWVkLCBmaXJzdFBvcywgdGFyZ2V0LCBwb3MpO1xuXG4gICAgICAvL2Vhc2UgaW4gZnVuY3Rpb24gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vY29tcG9uZW50L2Vhc2UvYmxvYi9tYXN0ZXIvaW5kZXguanNcbiAgICAgIGNvbnN0IG91dFF1YWQgPSBmdW5jdGlvbihuKXtcbiAgICAgICAgcmV0dXJuIG4gKiAoMiAtIG4pO1xuICAgICAgfTtcblxuICAgICAgbGV0IGVhc2VJblBlcmNlbnRhZ2UgPSArKG91dFF1YWQocHJvZ3Jlc3MpKS50b0ZpeGVkKDIpO1xuXG4gICAgICBwb3MgPSBmaXJzdFBvcyArICh0YXJnZXQgKiBlYXNlSW5QZXJjZW50YWdlKTtcbiAgICAgIHBvcyA9ICtwb3MudG9GaXhlZCgyKTtcbiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBwb3MpO1xuXG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgaXNOYU4ocG9zKSwgcG9zIDwgMCxcbiAgICAgICAgIWlzRG93biAmJiBwb3MgPD0gMCxcbiAgICAgICAgIWlzRG93biAmJiBwb3MgPD0gKGZpcnN0UG9zICsgdGFyZ2V0ICsgMSksXG4gICAgICAgIGlzRG93biAmJiBwb3MgPj0gKGZpcnN0UG9zICsgdGFyZ2V0KSxcbiAgICAgICAgaXNEb3duICYmIHBvcyArIHdpbmRvd0hlaWdodCArIHdpbmRvd0hlaWdodC82ID4gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsXG4gICAgICAgIGlzRG93biAmJiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LFxuICAgICAgICBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHRcbiAgICAgICAgKTtcblxuICAgICAgaWYoIGlzTmFOKHBvcykgfHwgcG9zIDwgMCB8fFxuICAgICAgICAhaXNEb3duICYmIHBvcyA8PSAwIHx8XG4gICAgICAgICFpc0Rvd24gJiYgcG9zIDw9IChmaXJzdFBvcyArIHRhcmdldCArIDEpIHx8XG4gICAgICAgIGlzRG93biAmJiBwb3MgPj0gKGZpcnN0UG9zICsgdGFyZ2V0KSB8fFxuICAgICAgICBpc0Rvd24gJiYgZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCApe1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShzdGFydCk7XG4gICAgICAgIGlmKGVsZW1lbnQpIHtcbiAgICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dCgoKT0+IHtcbiAgICAgICAgICBpc1Njcm9sbGluZyA9IGZhbHNlO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHBvcywgaXNTY3JvbGxpbmcsIGVsZW1lbnQpO1xuICAgICAgICB9LCAzMDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzaG93QW5pbWF0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzaG93QW5pbWF0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIElubmVyU2Nyb2xsKGNvbnRhaW5lciwgZWxlbWVudHMsIGlzRG93bikge1xuICAgIGlzU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICBsZXQgY29udGFpbmVyVG9wID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uX192YXJpYW50cycpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICBsZXQgcGFyZW50ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XG4gICAgbGV0IGN1cnJlbnQgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnZhcmlhbnQtLWN1cnJlbnQnKTtcbiAgICBsZXQgdGFyZ2V0SW5kZXggPSBpc0Rvd24gP1xuICAgICAgQXJyYXkuZnJvbShlbGVtZW50cykuZmluZEluZGV4KCBlbCA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3ZhcmlhbnQtLWN1cnJlbnQnKSkgKyAxIDpcbiAgICAgIEFycmF5LmZyb20oZWxlbWVudHMpLmZpbmRJbmRleCggZWwgPT4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd2YXJpYW50LS1jdXJyZW50JykpIC0gMTtcbiAgICBsZXQgdGFyZ2V0ID0gQXJyYXkuZnJvbShlbGVtZW50cylbdGFyZ2V0SW5kZXhdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDtcbiAgICBsZXQgcG9zID0gMDtcbiAgICBpZiAocGFyZW50LnN0eWxlLnRyYW5zZm9ybSkge1xuICAgICAgbGV0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocGFyZW50KTtcbiAgICAgIGxldCBtYXRyaXggPSBuZXcgRE9NTWF0cml4UmVhZE9ubHkoc3R5bGUudHJhbnNmb3JtKTtcbiAgICAgIHBvcyA9IG1hdHJpeC5tNDI7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGNvbnRhaW5lclRvcCwgcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCwgdGFyZ2V0LCBwb3MpO1xuICAgIGN1cnJlbnQuY2xhc3NMaXN0LnJlbW92ZSgndmFyaWFudC0tY3VycmVudCcpO1xuICAgIEFycmF5LmZyb20oZWxlbWVudHMpW3RhcmdldEluZGV4XS5jbGFzc0xpc3QuYWRkKCd2YXJpYW50LS1jdXJyZW50Jyk7XG4gICAgcGFyZW50LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7Y29udGFpbmVyVG9wIC0gdGFyZ2V0ICsgcG9zfXB4KWA7XG4gICAgc2V0VGltZW91dCgoKSA9PiBpc1Njcm9sbGluZyA9IGZhbHNlLCAzMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gU2xpZGVzU2Nyb2xsKGNvbnRhaW5lciwgZWxlbWVudHMsIGlzRG93bikge1xuICAgIGlzU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICBsZXQgY3VycmVudCA9IEFycmF5LmZyb20oZWxlbWVudHMpLmZpbmRJbmRleChlbCA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSk7XG4gICAgbGV0IHRhcmdldCA9IGlzRG93biA/IGN1cnJlbnQgKyAxIDogY3VycmVudCAtIDE7XG4gICAgQXJyYXkuZnJvbShlbGVtZW50cylbY3VycmVudF0uY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIEFycmF5LmZyb20oZWxlbWVudHMpW3RhcmdldF0uY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2xpZGUnLCArdGFyZ2V0KTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGlzU2Nyb2xsaW5nID0gZmFsc2UsIDMwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBBbmltYXRlRmFkZShjdXJyZW50LCB0YXJnZXQsIGlkRG93bikge1xuICAgIGlmICghKCFpZERvd24gJiYgdGFyZ2V0Lm9mZnNldEhlaWdodCA8IHdpbmRvdy5pbm5lckhlaWdodCkpIHtcbiAgICAgIGN1cnJlbnQuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZS1mYWRlJyk7XG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZS1mYWRlJyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gV2hlZWwoZSwgRG93bikge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoIWlzU2Nyb2xsaW5nKSB7XG4gICAgICBsZXQgY3VycmVudCA9IEFycmF5LmZyb20oc2VjdGlvbnMpLmZpbmRJbmRleChzZWN0aW9uID0+IHNlY3Rpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdhbmltYXRlJykpO1xuICAgICAgbGV0IGlzRG93biA9IGUuZGVsdGFZID4gMCB8fCBzZWN0aW9uc1tjdXJyZW50XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgPCAwO1xuICAgICAgY29uc29sZS5sb2coc2VjdGlvbnNbY3VycmVudF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLCBpc0Rvd24sIERvd24pO1xuICAgICAgbGV0IHRhcmdldDtcbiAgICAgIGlmIChpc0Rvd24pIHtcbiAgICAgICAgdGFyZ2V0ID0gY3VycmVudCArIDEgPD0gc2VjdGlvbnMubGVuZ3RoID8gQXJyYXkuZnJvbShzZWN0aW9ucylbY3VycmVudCArIDFdIDogQXJyYXkuZnJvbShzZWN0aW9ucylbY3VycmVudF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXQgPSBjdXJyZW50ID4gMCA/IEFycmF5LmZyb20oc2VjdGlvbnMpW2N1cnJlbnQgLSAxXSA6IEFycmF5LmZyb20oc2VjdGlvbnMpWzBdO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VjdGlvbnNbY3VycmVudF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWN0aW9uLS12YXJpYW50cycpKSB7XG4gICAgICAgIGxldCB2YXJpYW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uLS12YXJpYW50cyAudmFyaWFudCcpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNEb3duICYmIHZhcmlhbnRzW3ZhcmlhbnRzLmxlbmd0aCAtIDFdLmNsYXNzTGlzdC5jb250YWlucygndmFyaWFudC0tY3VycmVudCcpIHx8XG4gICAgICAgICAgIWlzRG93biAmJiB2YXJpYW50c1swXS5jbGFzc0xpc3QuY29udGFpbnMoJ3ZhcmlhbnQtLWN1cnJlbnQnKVxuICAgICAgICApIHtcbiAgICAgICAgICBuZXcgU2Nyb2xsKHRhcmdldCwgaXNEb3duLCA2MDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHNlY3Rpb25zW2N1cnJlbnRdLCBzZWN0aW9uc1tjdXJyZW50XS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApO1xuICAgICAgICAgIHNlY3Rpb25zW2N1cnJlbnRdLnNjcm9sbFRvKHt0b3A6IDAsIGxlZnQ6IDAsIGJlaGF2aW9yOiBcImluc3RhbnRcIn0pO1xuICAgICAgICAgIG5ldyBJbm5lclNjcm9sbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi0tdmFyaWFudHMnKSwgdmFyaWFudHMsIGlzRG93bik7XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIGlmIChzZWN0aW9uc1tjdXJyZW50XS5jbGFzc0xpc3QuY29udGFpbnMoJ3NlY3Rpb24tLXdvcmxkJykpIHtcbiAgICAgICAgbGV0IHNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uLS13b3JsZCAuc2VjdGlvbl9fc2xpZGUnKTtcbiAgICAgICAgaWYgKGlzRG93biAmJiBzbGlkZXNbc2xpZGVzLmxlbmd0aCAtIDFdLmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpIHx8XG4gICAgICAgICAgIWlzRG93biAmJiBzbGlkZXNbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcbiAgICAgICAgICBuZXcgU2Nyb2xsKHRhcmdldCwgaXNEb3duLCA2MDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBTbGlkZXNTY3JvbGwoc2VjdGlvbnNbY3VycmVudF0sIHNsaWRlcywgaXNEb3duKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBzZWN0aW9uc1tjdXJyZW50XS5jbGFzc0xpc3QuY29udGFpbnMoJ3NlY3Rpb24tLXJvYWRtYXAnKSB8fFxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWN0aW9uLS1yb2FkbWFwJykgJiYgIWlzRG93biB8fFxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWN0aW9uLS1vcHBvcnR1bml0aWVzJykgJiYgIWlzRG93blxuICAgICAgKSB7XG4gICAgICAgIGxldCBleHBlcnRpc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi0tcm9hZG1hcCAuZXhwZXJ0aXNlJyk7XG4gICAgICAgIGlmIChleHBlcnRpc2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbmltYXRlLW9mZicpKSB7XG4gICAgICAgICAgaWYgKGlzRG93bikge1xuICAgICAgICAgICAgbmV3IEFuaW1hdGVGYWRlKHNlY3Rpb25zW2N1cnJlbnRdLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uX19jb250ZW50JyksIGV4cGVydGlzZSwgaXNEb3duKTtcbiAgICAgICAgICAgIG5ldyBTY3JvbGwoZXhwZXJ0aXNlLCBpc0Rvd24sIDkwMCwgJ2JvdHRvbScpO1xuICAgICAgICAgICAgZXhwZXJ0aXNlLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUtb2ZmJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldC5xdWVyeVNlbGVjdG9yKCcuY29tbXVuaXR5JykuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZS1mYWRlJyk7XG4gICAgICAgICAgICBuZXcgU2Nyb2xsKHRhcmdldC5xdWVyeVNlbGVjdG9yKCcuY29tbXVuaXR5JyksIGlzRG93biwgOTAwLCAnY2VudGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGV4cGVydGlzZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FuaW1hdGUtZmFkZScpKSB7XG4gICAgICAgICAgZXhwZXJ0aXNlLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUtZmFkZScpO1xuICAgICAgICAgIHRhcmdldC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbl9fY29udGVudCcpLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGUtZmFkZScpO1xuICAgICAgICAgIG5ldyBTY3JvbGwoZXhwZXJ0aXNlLCBpc0Rvd24sIDkwMCwgJ2JvdHRvbScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChpc0Rvd24pIHtcbiAgICAgICAgICAgIG5ldyBTY3JvbGwodGFyZ2V0LCBpc0Rvd24sIDYwMCk7XG4gICAgICAgICAgICBleHBlcnRpc2UuY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZS1mYWRlJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBTY3JvbGwoc2VjdGlvbnNbY3VycmVudF0sIGlzRG93biwgNjAwKTtcbiAgICAgICAgICAgIGV4cGVydGlzZS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlLW9mZicpO1xuICAgICAgICAgICAgc2VjdGlvbnNbY3VycmVudF0ucXVlcnlTZWxlY3RvcignLnNlY3Rpb25fX2NvbnRlbnQnKS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlLWZhZGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgc2VjdGlvbnNbY3VycmVudF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWN0aW9uLS1vcHBvcnR1bml0aWVzJykgfHxcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2VjdGlvbi0tb3Bwb3J0dW5pdGllcycpICYmICFpc0Rvd24gfHxcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2VjdGlvbi0tYmFja3N0b3J5JykgJiYgIWlzRG93blxuICAgICAgKSB7XG4gICAgICAgIGxldCBjb21tdW5pdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi0tb3Bwb3J0dW5pdGllcyAuY29tbXVuaXR5Jyk7XG4gICAgICAgIGlmIChjb21tdW5pdHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbmltYXRlLW9mZicpKSB7XG4gICAgICAgICAgaWYgKGlzRG93bikge1xuICAgICAgICAgICAgY29tbXVuaXR5LmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUtb2ZmJyk7XG4gICAgICAgICAgICBuZXcgQW5pbWF0ZUZhZGUoc2VjdGlvbnNbY3VycmVudF0ucXVlcnlTZWxlY3RvcignLnNlY3Rpb25fX2NvbnRlbnQnKSwgY29tbXVuaXR5LCBpc0Rvd24pO1xuICAgICAgICAgICAgbmV3IFNjcm9sbChjb21tdW5pdHksIGlzRG93biwgOTAwLCAnY2VudGVyJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldC5xdWVyeVNlbGVjdG9yKCcucGxhY2UnKS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlLWZhZGUnKTtcbiAgICAgICAgICAgIG5ldyBTY3JvbGwodGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5wbGFjZScpLCBpc0Rvd24sIDkwMCwgJ2NlbnRlcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChjb21tdW5pdHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbmltYXRlLWZhZGUnKSkge1xuICAgICAgICAgIGNvbW11bml0eS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlLWZhZGUnKTtcbiAgICAgICAgICB0YXJnZXQucXVlcnlTZWxlY3RvcignLnNlY3Rpb25fX2NvbnRlbnQnKS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlLWZhZGUnKTtcbiAgICAgICAgICBuZXcgU2Nyb2xsKGNvbW11bml0eSwgaXNEb3duLCA5MDAsICdjZW50ZXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoaXNEb3duKSB7XG4gICAgICAgICAgICBuZXcgU2Nyb2xsKGNvbW11bml0eSwgaXNEb3duLCA5MDAsICdjZW50ZXInKTtcbiAgICAgICAgICAgIGNvbW11bml0eS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlLWZhZGUnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IFNjcm9sbChzZWN0aW9uc1tjdXJyZW50XSwgaXNEb3duLCA2MDApO1xuICAgICAgICAgICAgY29tbXVuaXR5LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGUtb2ZmJyk7XG4gICAgICAgICAgICBzZWN0aW9uc1tjdXJyZW50XS5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbl9fY29udGVudCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUtZmFkZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBzZWN0aW9uc1tjdXJyZW50XS5jbGFzc0xpc3QuY29udGFpbnMoJ3NlY3Rpb24tLWJhY2tzdG9yeScpIHx8XG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NlY3Rpb24tLWJhY2tzdG9yeScpICYmICFpc0Rvd24gfHxcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2VjdGlvbi0td29ybGQnKSAmJiAhaXNEb3duXG4gICAgICApIHtcbiAgICAgICAgbGV0IHBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tLWJhY2tzdG9yeSAucGxhY2UnKTtcbiAgICAgICAgaWYgKHBsYWNlLmNsYXNzTGlzdC5jb250YWlucygnYW5pbWF0ZS1vZmYnKSkge1xuICAgICAgICAgIGlmIChpc0Rvd24pIHtcbiAgICAgICAgICAgIHBsYWNlLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUtb2ZmJyk7XG4gICAgICAgICAgICBuZXcgQW5pbWF0ZUZhZGUoc2VjdGlvbnNbY3VycmVudF0ucXVlcnlTZWxlY3RvcignLnNlY3Rpb25fX2NvbnRlbnQnKSwgcGxhY2UsIGlzRG93bik7XG4gICAgICAgICAgICBuZXcgU2Nyb2xsKHBsYWNlLCBpc0Rvd24sIDkwMCwgJ2NlbnRlcicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWN0aW9uc1tjdXJyZW50XS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlLW9mZicpO1xuICAgICAgICAgICAgbmV3IFNjcm9sbCh0YXJnZXQsIGlzRG93biwgNjAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocGxhY2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbmltYXRlLWZhZGUnKSkge1xuICAgICAgICAgIHBsYWNlLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUtZmFkZScpO1xuICAgICAgICAgIHRhcmdldC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbl9fY29udGVudCcpLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGUtZmFkZScpO1xuICAgICAgICAgIG5ldyBTY3JvbGwocGxhY2UsIGlzRG93biwgOTAwLCAnY2VudGVyJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGlzRG93bikge1xuICAgICAgICAgICAgbmV3IFNjcm9sbChwbGFjZSwgaXNEb3duLCA5MDAsICdjZW50ZXInKTtcbiAgICAgICAgICAgIHBsYWNlLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGUtZmFkZScpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgU2Nyb2xsKHNlY3Rpb25zW2N1cnJlbnRdLCBpc0Rvd24sIDYwMCk7XG4gICAgICAgICAgICBwbGFjZS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlLW9mZicpO1xuICAgICAgICAgICAgc2VjdGlvbnNbY3VycmVudF0ucXVlcnlTZWxlY3RvcignLnNlY3Rpb25fX2NvbnRlbnQnKS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlLWZhZGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2codGFyZ2V0KTtcbiAgICAgICAgbmV3IFNjcm9sbCh0YXJnZXQsIGlzRG93biwgNjAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBXaGVlbCwge3Bhc3NpdmU6IGZhbHNlfSk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgV2hlZWwsIHtwYXNzaXZlOiBmYWxzZX0pO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBXaGVlbCwge3Bhc3NpdmU6IGZhbHNlfSk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBXaGVlbCwge3Bhc3NpdmU6IGZhbHNlfSk7XG4gIC8vXG4gIC8vIGRvY3VtZW50Lm9ua2V5dXAgPSBmdW5jdGlvbihlKXtcbiAgLy8gICBjb25zb2xlLmxvZygnS2V5IDogJyArIGUuY29kZSk7XG4gIC8vICAgbGV0IGN1cnJlbnQgPSBBcnJheS5mcm9tKHNlY3Rpb25zKS5maW5kSW5kZXgoIHNlY3Rpb24gPT4gc2VjdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2FuaW1hdGUnKSApO1xuICAvLyAgIGxldCB0YXJnZXQ7XG4gIC8vICAgaWYgKGUuY29kZSA9PT0gKCdTcGFjZScgfHwgJ0Fycm93RG93bicgfHwgJ1BhZ2VEb3duJyB8fCAnRG93bicpKSB7XG4gIC8vICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIC8vICAgICB0YXJnZXQgPSBjdXJyZW50ICsgMSA8IHNlY3Rpb25zLmxlbmd0aCA/IEFycmF5LmZyb20oc2VjdGlvbnMpW2N1cnJlbnQgKyAxXSA6IEFycmF5LmZyb20oc2VjdGlvbnMpW2N1cnJlbnRdO1xuICAvLyAgICAgbmV3IFNjcm9sbCh0YXJnZXQsIHRydWUpO1xuICAvLyAgIH0gZWxzZSBpZiAoZS5jb2RlID09PSAoJ0Fycm93VXAnIHx8ICdQYWdlVXAnIHx8ICdVcCcpKSB7XG4gIC8vICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIC8vICAgICB0YXJnZXQgPSBjdXJyZW50ID4gMCA/IEFycmF5LmZyb20oc2VjdGlvbnMpW2N1cnJlbnQgLSAxXSA6IEFycmF5LmZyb20oc2VjdGlvbnMpWzBdO1xuICAvLyAgICAgbmV3IFNjcm9sbCh0YXJnZXQsIGZhbHNlKTtcbiAgLy8gICB9XG4gIC8vIH07XG5cbiAgbGV0IHNwbGlkZSA9IG5ldyBTcGxpZGUoICcucm9hZCcsIHtcbiAgICBwZXJQYWdlOiAzLFxuICAgIHBlck1vdmU6IDEsXG4gICAgYnJlYWtwb2ludHM6IHtcbiAgICAgIDkyMDoge1xuICAgICAgICBwZXJQYWdlOiAyXG4gICAgICB9LFxuICAgICAgNTIwOiB7XG4gICAgICAgIHBlclBhZ2U6IDFcbiAgICAgIH0sXG4gICAgfSxcbiAgfSApO1xuICBzcGxpZGUubW91bnQoKTtcblxuICBsZXQgcHJlc3MgPSBuZXcgU3BsaWRlKCAnLnNlY3Rpb25fX2FydGljbGVzJywge1xuICAgIHBlclBhZ2U6IDMsXG4gICAgcGVyTW92ZTogMSxcbiAgICBnYXA6ICczMnB4JyxcbiAgICBicmVha3BvaW50czoge1xuICAgICAgNjQwOiB7XG4gICAgICAgIGdhcDogJzE2cHgnLFxuICAgICAgICBwZXJQYWdlOiAyXG4gICAgICB9LFxuICAgICAgNTIwOiB7XG4gICAgICAgIGdhcDogJzE2cHgnLFxuICAgICAgICBwZXJQYWdlOiAxXG4gICAgICB9LFxuICAgIH0sXG4gIH0gKTtcbiAgcHJlc3MubW91bnQoKTtcblxuICBsZXQgc3BsaWRlT3BwID0gbmV3IFNwbGlkZSggJy5zZWN0aW9uX19vcHBvcnR1bml0aWVzJywge1xuICAgIHBlclBhZ2U6IDQsXG4gICAgcGVyTW92ZTogMSxcbiAgICBnYXA6ICczMnB4JyxcbiAgICBicmVha3BvaW50czoge1xuICAgICAgOTIwOiB7XG4gICAgICAgIHBlclBhZ2U6IDJcbiAgICAgIH0sXG4gICAgICA2NDA6IHtcbiAgICAgICAgcGVyUGFnZTogMVxuICAgICAgfVxuICAgIH0sXG4gIH0gKTtcbiAgc3BsaWRlT3BwLm1vdW50KCk7XG59O1xuXG4iXX0=
